var shiftRes=[],	metashiftRes=[],	shiftArr =[],	sevenDayHap=[];$(document).ready(function(){	div = document.getElementById("graph");	getHedoData()	drawChart();	drawChart2;			$('#btn').click(function(e){		sentiment();		e.preventDefault();	});});function getHedoData(){	// from db $.get('/api/daily',function(req,res){	console.log('get request',req);	var len = req.length;	shiftArr = req[(len-1)].shift;	metashiftRes = req[(len-1)].meta;/******* get the last 7 days from req[].meta *********/	for(var j = 7;j>0;j--){		var cur =parseFloat(req[(len-j)].meta[1][1])		var curDate = req[(len-j)].date		sevenDayHap.push([curDate,cur]) 	}	console.log(sevenDayHap)	// console.log(shiftArr,metashiftRes)	google.charts.load('current', {'packages':['corechart']});	google.charts.setOnLoadCallback(drawChart);	google.charts.setOnLoadCallback(drawChart2);})}function drawChart2(x,y) {  var data = new google.visualization.DataTable();  data.addColumn('string','Date');  data.addColumn('number','Score');  data.addRows(sevenDayHap);    var options = {      title: "Today's Total Happiness Score: "+metashiftRes[1][1],      curveType: 'function',      legend:{position:'none'}    };    var chart = new google.visualization.LineChart(document.getElementById('graph2'));    chart.draw(data, options);   }    function drawChart(x,y) {  var data = new google.visualization.DataTable();  var cur = [];  data.addColumn('string','Word');  data.addColumn('number','Score');  	for(var i = 1;i<shiftArr.length;i++){  		cur.push([shiftArr[i][1],parseFloat(shiftArr[i][0])])	}  data.addRows(cur);    var options = {      title: "Today's Total Happiness Score: "+metashiftRes[1][1],      curveType: 'function',      legend:{position:'none'}    };    var chart = new google.visualization.LineChart(document.getElementById('graph'));    chart.draw(data, options);   }var sentiment = function(){	var q1=$("#q1").val(),	//these are the question responses		q2=$("#q2").val(),		q3=$("#q3").val(),		q4=$("#q4").val();	var qArr = {q1:q1,q2:q2,q3:q3,q4:q4};	/***** 		MAKE LATER		if {score is above a certain threshold "Excellent- keep it up"		else {google img search lowest scored word + motivation and post to modal	******/	$.post( "/questionaire",qArr)		.then(function(data){		console.log(data)			$('.modal-body').append(renderModal(data));			$('#myModal').modal('show');		});    $(this).trigger("reset");};function renderModal(currentUser){	var len = currentUser.qTwo.length;	var curUser=currentUser.qTwo[len-1];var modalHtml = '       <h3>Overall</h3>'+  '       <h3><small>' +curUser[0].key[0].word+'</small></h3>'+ '       <h3><small>' +curUser[0].type+'</small></h3>'+ '       <h3><small>'+curUser[0].score +'</small></h3>'+ '       <p>cool picture goes here</p>'+ '       <h3>'+currentUser.goals[0] +'</h3>'+  '      <h3><small> '+curUser[1].type+'</small></h3>'+  '      <h3><small>'+curUser[1].score +'</small></h3>'+  '      <p>cool picture goes here</p>'+  '      <h3>'+currentUser.goals[1]+'</h3>'+  '      <h3><small> '+curUser[2].type+'</small></h3>'+ '       <h3><small>'+curUser[2].score +'</small></h3>'+  '      <p>cool picture goes here</p>'+   '     <h3>'+currentUser.goals[2] +'</h3>'+   '     <h3><small> '+curUser[3].type+'</small></h3>'+ '       <h3><small>'+curUser[3].score +'</small></h3>'+   '     <p>cool picture goes here</p>'; return modalHtml;}